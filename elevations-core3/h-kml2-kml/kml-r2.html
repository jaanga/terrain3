<!doctype html>
<html lang=en >
<head>
<meta charset=utf-8 >
<title>Terrain3 Elevations Core3 KML R2</title>
<meta name=viewport content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no' >
<meta name=description content='Core three.js' >
<meta name=keywords content='WebGL,Three.js,JavaScript,GitHub,FOSS,3D,STEM' >
<meta name=date content='2016-09-07' >
</head>
<body>
<!--
<script src=https://mrdoob.github.io/three.js/build/three.min.js ></script>
<script src=https://mrdoob.github.io/three.js/examples/js/controls/OrbitControls.js ></script>
<script src=https://mrdoob.github.io/three.js/examples/js/libs/stats.min.js ></script>
-->
<script src=https://rawgit.com/mrdoob/three.js/dev/build/three.min.js ></script>
<script src=https://rawgit.com/mrdoob/three.js/dev/examples/js/controls/OrbitControls.js ></script>
<script src=https://rawgit.com/mrdoob/three.js/dev/examples/js/libs/stats.min.js ></script>
<script src=https://rawgit.com/spite/THREE.MeshLine/master/src/THREE.MeshLine.js ></script>

<script src=../a-cor-core/core-r2.js ></script>
<script src=../b-sel-select/select-r1.js ></script>
<script src=../c-ovr-overlay/overlay-r1.js ></script>
<script src=../d-ter-terrain/terrain-r1.js ></script>
<script src=../e-thr-threejs/threejs-r1.js ></script>
<script src=../f-map-map/map-r2.js ></script>
<script src=../g-msh-mesh-lines/mesh-lines-r1.js ></script>
<script src=../h-kml2-kml/kml-r2.js ></script>

<script>

//	SEL.defaultFile = '../../elevations/elevations-data-oakland-gran-fondo/oakland-gran-fondo-100-r1_11_328_791_3_3_510_510_.txt';

	SEL.searchInFolder = 'elevations-data-kml/';
	SEL.extension = '.txt';

//	SEL.urlBase = '../../../../elevations/' + SEL.searchInFolder;
	SEL.urlBase = 'https://jaanga.github.io/terrain3/elevations/' + SEL.searchInFolder;

	THR.moreThreejsInits = function() {

		THR.renderer.setClearColor( 0x7ec0ee );
		THR.updateCamera = true;

		THR.axisHelper = new THREE.AxisHelper( 50 );
		THR.scene.add( THR.axisHelper );
		THR.updateCamera === true;

	};

	SEL.onLoadJSONFile = function() {

		COR.place = SEL.fileJSON;
		COR.place.name = SEL.fileName;

		COR.getPlaceDefaults();

		OVR.setMenuDetailsOverlay();

//		OVR.getMapOverlayParameters();

console.log( 'file loaded', SEL.fileName );

		MAP.initMapGeometry();

		KML.drawPath();

	}

	init();

	THR.getThreeJS();

	THR.animate();

	function init() {

//		COR.taglineHeader = 'Howdy!' + b;

		COR.initLeftMenu();

		COR.menu.innerHTML =

			COR.getMenuDetailsHeader() +

			SEL.getMenuDetailsSelectFile() +

			OVR.getMenuDetailsOverlay() +

			TER.getMenuDetailsTerrain() +

			COR.getMenuDetailsAbout() +

			COR.getMenuFooter() +

		b;

		if ( window.self !== window.top ) { hamburger.style.left = '0px'; }

		SEL.getGitHubAPITreeContents();

		detailsOverlay.setAttribute('open', 'open');

		detailsOverlayParameters.setAttribute('open', 'open');

		detailsTerrain.setAttribute('open', 'open');

		detailsTerrainParameters.setAttribute('open', 'open');

	}

</script>
</body>
</html>
